{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/purujitvij/Documents/BrewingCode/nextjs/digipower-frontend/src/app/api/media/%5B...path%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nconst STRAPI_MEDIA_URL = 'https://thankful-miracle-1ed8bdfdaf.media.strapiapp.com';\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ path: string[] }> }\n) {\n  try {\n    const { path } = await params;\n    const filePath = path.join('/');\n\n    // Construct the full Strapi media URL\n    const mediaUrl = `${STRAPI_MEDIA_URL}/${filePath}`;\n\n    // Fetch the file from Strapi\n    const response = await fetch(mediaUrl, {\n      headers: {\n        'Accept': '*/*',\n      },\n    });\n\n    if (!response.ok) {\n      return NextResponse.json(\n        { error: 'File not found' },\n        { status: response.status }\n      );\n    }\n\n    // Get the content type from the response\n    const contentType = response.headers.get('content-type') || 'application/octet-stream';\n\n    // Get the file as array buffer\n    const fileBuffer = await response.arrayBuffer();\n\n    // Return the file with appropriate headers\n    return new NextResponse(fileBuffer, {\n      status: 200,\n      headers: {\n        'Content-Type': contentType,\n        'Content-Disposition': contentType.includes('pdf')\n          ? 'inline'\n          : `attachment; filename=\"${filePath.split('/').pop()}\"`,\n        'Cache-Control': 'public, max-age=31536000, immutable',\n      },\n    });\n  } catch (error) {\n    console.error('Error proxying media file:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch media file' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,mBAAmB;AAElB,eAAe,IACpB,OAAoB,EACpB,EAAE,MAAM,EAA2C;IAEnD,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;QACvB,MAAM,WAAW,KAAK,IAAI,CAAC;QAE3B,sCAAsC;QACtC,MAAM,WAAW,GAAG,iBAAiB,CAAC,EAAE,UAAU;QAElD,6BAA6B;QAC7B,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC,SAAS;gBACP,UAAU;YACZ;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,yCAAyC;QACzC,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;QAE5D,+BAA+B;QAC/B,MAAM,aAAa,MAAM,SAAS,WAAW;QAE7C,2CAA2C;QAC3C,OAAO,IAAI,gJAAY,CAAC,YAAY;YAClC,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,uBAAuB,YAAY,QAAQ,CAAC,SACxC,WACA,CAAC,sBAAsB,EAAE,SAAS,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;gBACzD,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}