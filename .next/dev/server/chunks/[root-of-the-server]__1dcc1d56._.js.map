{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/purujitvij/Documents/BrewingCode/nextjs/digipower-frontend/src/app/api/live-stock/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nconst BACKEND_API_URL = process.env.BACKEND_API_URL || 'http://ec2-51-20-254-227.eu-north-1.compute.amazonaws.com';\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const symbol = searchParams.get('symbol')?.toUpperCase() || 'DGXX';\n\n    const response = await fetch(`${BACKEND_API_URL}/api/live-stock?symbol=${symbol}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      // Don't cache the response - we want real-time data\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Backend returned ${response.status}`);\n    }\n\n    const data = await response.json();\n\n    // Add caching headers to reduce API hits\n    // Cache for 30 seconds on client, 60 seconds on CDN\n    return NextResponse.json(data, {\n      headers: {\n        'Cache-Control': 'public, max-age=30, s-maxage=60, stale-while-revalidate=120',\n      },\n    });\n  } catch (error) {\n    console.error('Error proxying to backend:', error);\n    return NextResponse.json(\n      {\n        error: 'Failed to fetch stock data',\n        message: error instanceof Error ? error.message : 'Unknown error',\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,QAAQ,GAAG,CAAC,eAAe,IAAI;AAEhD,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC,WAAW,iBAAiB;QAE5D,MAAM,WAAW,MAAM,MAAM,GAAG,gBAAgB,uBAAuB,EAAE,QAAQ,EAAE;YACjF,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,oDAAoD;YACpD,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,iBAAiB,EAAE,SAAS,MAAM,EAAE;QACvD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,yCAAyC;QACzC,oDAAoD;QACpD,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;YAC7B,SAAS;gBACP,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}