{"version":3,"sources":["../../../../node_modules/next/node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../src/app/sec-filings/SecFilingsClient.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/sec-filings/page.tsx"],"sourcesContent":["\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/sec-filings/SecFilingsClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/sec-filings/SecFilingsClient.tsx\",\n    \"default\",\n);\n","import Navigation from \"@/components/Navigation\";\nimport Footer from \"@/components/Footer\";\nimport SecFilingsClient, { Filing } from \"./SecFilingsClient\";\nimport { Metadata } from \"next\";\nimport { toLocalMediaUrl } from \"@/lib/media-url\";\nimport { STRAPI_API, toAbsoluteStrapiUrl } from \"@/lib/strapi\";\n\ninterface PdfFile {\n    id: number;\n    documentId: string;\n    name: string;\n    url: string;\n    mime: string;\n    size: number;\n}\n\ninterface StrapiFilingItem {\n    id: number;\n    documentId: string;\n    date?: string;\n    form_type?: string;\n    description?: string;\n    pdf_file?: PdfFile;\n}\n\nconst API_BASE = STRAPI_API.secFilings;\n\nconst mapFilings = (items: StrapiFilingItem[]): Filing[] =>\n    items.map((item) => {\n        let pdfUrl = item.pdf_file?.url || \"\";\n\n        // If URL is relative, prepend the Strapi base URL first\n        pdfUrl = toAbsoluteStrapiUrl(pdfUrl) || \"\";\n\n        // Convert to local proxy URL\n        pdfUrl = toLocalMediaUrl(pdfUrl) || \"\";\n\n        return {\n            id: item.id,\n            date: item.date || \"\",\n            form: item.form_type?.trim() || \"N/A\",\n            desc: item.description || \"\",\n            link: pdfUrl,\n        };\n    });\n\nexport const metadata: Metadata = {\n    title: \"DigiPowerX SEC Filings | AI Cloud & Infrastructure Disclosures\",\n    description: \"DigiPowerX SEC Filings | Transparent Financial Statements, Regulatory Disclosures & Compliance Updates for AI and Cloud Infrastructure Investors.\",\n};\n\n// Static generation with ISR - page is pre-built and revalidated every hour\nexport const dynamic = 'force-static';\nexport const revalidate = 3600;\n\nasync function fetchAllSecFilings(): Promise<Filing[]> {\n    const pageSize = 100;\n    const buildURL = (page: number) =>\n        `${API_BASE}?populate=*&sort=date:desc&pagination[page]=${page}&pagination[pageSize]=${pageSize}`;\n\n    let allFilings: StrapiFilingItem[] = [];\n\n    try {\n        // Fetch first page to get total page count - use ISR to cache for 1 hour\n        const firstResponse = await fetch(buildURL(1), { next: { revalidate: 3600 } });\n        if (!firstResponse.ok) {\n            console.error(`HTTP error! status: ${firstResponse.status}`);\n            return [];\n        }\n\n        const firstJson = await firstResponse.json();\n        const firstData = firstJson.data || [];\n        const pageCount = firstJson.meta?.pagination?.pageCount || 1;\n        allFilings.push(...firstData);\n\n        // Fetch remaining pages with ISR caching\n        if (pageCount > 1) {\n            const promises = [];\n            for (let p = 2; p <= pageCount; p++) {\n                promises.push(fetch(buildURL(p), { next: { revalidate: 3600 } }).then(r => r.json()));\n            }\n\n            const results = await Promise.all(promises);\n            results.forEach(json => {\n                if (json && json.data) {\n                    allFilings.push(...json.data);\n                }\n            });\n        }\n\n        return mapFilings(allFilings);\n    } catch (error) {\n        console.error(\"Error fetching SEC filings:\", error);\n        return [];\n    }\n}\n\nexport default async function SecFilings() {\n    const filings = await fetchAllSecFilings();\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-slate-950 dark:to-slate-900 transition-colors duration-300\">\n            <Navigation />\n            <SecFilingsClient initialFilings={filings} />\n            <Footer />\n        </div>\n    );\n}\n"],"names":[],"mappings":"mYAKA,GAAQ,CAAC,CAHT,EAGY,OAHsB,AAAzB,CAA4B,EACjC,OAAO,GAAO,EAAI,UAAU,CAAG,EAAM,CAAE,QAAS,CAAI,CACxD,uDCFe,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,0SAA4S,EACzU,yEACA,gEAHW,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,sRAAwR,EACrT,qDACA,8GCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAoBA,IAAM,EAAW,EAAA,UAAU,CAAC,UAAU,CA8BtC,eAAe,IAEX,IAAM,EAAW,AAAC,GACd,GAAG,SAAS,uCAA8C,KAAF,AAAO,sBAAsB,CAAY,CAEjG,AAFuF,EAEtD,EAAE,CAEvC,GAAI,CAEA,IAAM,EAAgB,MAAM,MAAM,EAAS,GAAI,CAAE,KAAM,CAAE,WAAY,IAAK,CAAE,GAC5E,GAAI,CAAC,EAAc,EAAE,CAEjB,CAFmB,MACnB,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,EAAc,MAAM,CAAA,CAAE,EACpD,EAAE,CAGb,IAAM,EAAY,MAAM,EAAc,IAAI,GACpC,EAAY,EAAU,IAAI,EAAI,EAAE,CAChC,EAAY,EAAU,IAAI,EAAE,YAAY,WAAa,EAI3D,GAHA,EAAW,IAAI,IAAI,GAGf,EAAY,EAAG,CACf,IAAM,EAAW,EAAE,CACnB,IAAK,IAAI,EAAI,EAAG,GAAK,EAAW,IAAK,AACjC,EAAS,IAAI,CAAC,MAAM,EAAS,GAAI,CAAE,KAAM,CAAE,WAAY,IAAK,CAAE,GAAG,IAAI,CAAC,GAAK,EAAE,IAAI,KAIrF,CADgB,MAAM,QAAQ,GAAG,CAAC,EAAA,EAC1B,OAAO,CAAC,IACR,GAAQ,EAAK,IAAI,EAAE,AACnB,EAAW,IAAI,IAAI,EAAK,IAAI,CAEpC,EACJ,CAEA,OA9DJ,AA8DW,AAAW,EA9DhB,GAAG,CAAC,AAAC,IACP,IAAI,EAAS,EAAK,QAAQ,EAAE,KAAO,GAQnC,OALA,EAAS,CAAA,EAAA,EAAA,mBAAmB,AAAnB,EAAoB,IAAW,GAGxC,EAAS,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,IAAW,GAE7B,CACH,GAAI,EAAK,EAAE,CACX,KAAM,EAAK,IAAI,EAAI,GACnB,KAAM,EAAK,SAAS,EAAE,QAAU,MAChC,KAAM,EAAK,WAAW,EAAI,GAC1B,KAAM,CACV,CACJ,EA+CA,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,8BAA+B,GACtC,EAAE,AACb,CACJ,CAEe,eAAe,IAC1B,IAAM,EAAU,MAAM,IAEtB,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qIACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAA,GACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAgB,CAAA,CAAC,eAAgB,IAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAA,KAGnB,kCAvDuB,4BANW,CAC9B,MAAO,iEACP,YAAa,mJACjB,iBAI0B","ignoreList":[0,1]}