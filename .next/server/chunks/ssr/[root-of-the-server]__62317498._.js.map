{"version":3,"sources":["../../../../node_modules/next/node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../src/app/press-releases/PressReleasesClient.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/press-releases/page.tsx"],"sourcesContent":["\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/press-releases/PressReleasesClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/press-releases/PressReleasesClient.tsx\",\n    \"default\",\n);\n","import Navigation from \"@/components/Navigation\";\nimport Footer from \"@/components/Footer\";\nimport PressReleasesClient, { PressRelease } from \"./PressReleasesClient\";\nimport { Metadata } from \"next\";\nimport { toLocalMediaUrl } from \"@/lib/media-url\";\nimport { STRAPI_API, toAbsoluteStrapiUrl } from \"@/lib/strapi\";\n\nexport const metadata: Metadata = {\n    title: \"DigiPowerX Press Releases | Latest News & Announcements\",\n    description: \"Latest Updates & Press Releases from DigiPowerX. Stay Informed on AI Cloud Infrastructure Developments & Strategic Milestones.\",\n};\n\n// Static generation with ISR - page is pre-built and revalidated every hour\nexport const dynamic = 'force-static';\nexport const revalidate = 3600;\n\nasync function fetchPressReleases(): Promise<PressRelease[]> {\n    const baseURL = STRAPI_API.pressReleases;\n    const pageSize = 100; // fetch 100 per page\n\n    const buildURL = (page: number) =>\n        `${baseURL}?fields=title,date,content&populate[pdf_file][fields]=url,name&sort[0]=date:desc&pagination[page]=${page}&pagination[pageSize]=${pageSize}`;\n\n    try {\n        let all: any[] = [];\n\n        // first page - use ISR to cache for 1 hour instead of fetching fresh every time\n        const first = await fetch(buildURL(1), { next: { revalidate: 3600 } }).then((r) => r.json());\n        const firstData = first?.data || [];\n        const pageCount = first?.meta?.pagination?.pageCount || 1;\n        all.push(...firstData);\n\n        // fetch remaining pages with ISR caching\n        const remainingPromises = [];\n        for (let p = 2; p <= pageCount; p++) {\n            remainingPromises.push(fetch(buildURL(p), { next: { revalidate: 3600 } }).then((r) => r.json()));\n        }\n\n        const remaining = await Promise.all(remainingPromises);\n        remaining.forEach(r => all.push(...(r?.data || [])));\n\n        // normalize formatting\n        const formatted = all.map((item: any) => {\n            const attrs = item.attributes ?? item;\n            const id = item.documentId ?? item.id ?? attrs.id;\n\n            let pdfUrl: string | null = null;\n            try {\n                if (attrs.pdf_file?.data?.attributes?.url)\n                    pdfUrl = attrs.pdf_file.data.attributes.url;\n                else if (attrs.pdf_file?.url) pdfUrl = attrs.pdf_file.url;\n                else if (item.pdf_file?.url) pdfUrl = item.pdf_file.url;\n\n                // If URL is relative, prepend the Strapi base URL first\n                pdfUrl = toAbsoluteStrapiUrl(pdfUrl);\n\n                // Convert to local proxy URL\n                pdfUrl = toLocalMediaUrl(pdfUrl);\n            } catch { }\n\n            return {\n                id,\n                title: attrs.title ?? \"Untitled\",\n                date: attrs.date ?? \"\",\n                category: \"Corporate Update\",\n                excerpt:\n                    attrs.content ??\n                    \"Click to view the full official press release PDF.\",\n                pdfUrl,\n            } as PressRelease;\n        });\n\n        return formatted;\n    } catch {\n        return [];\n    }\n}\n\nexport default async function Page() {\n    const pressReleases = await fetchPressReleases();\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-slate-950 dark:to-slate-900 text-slate-900 dark:text-white\">\n            <Navigation />\n            <PressReleasesClient initialPressReleases={pressReleases} />\n            <Footer />\n        </div>\n    );\n}\n"],"names":[],"mappings":"mYAKA,GAAQ,CAAC,CAHT,EAGY,OAHsB,AAAzB,CAA4B,EACjC,OAAO,GAAO,EAAI,UAAU,CAAG,EAAM,CAAE,QAAS,CAAI,CACxD,uDCFe,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,gTAAkT,EAC/U,+EACA,+DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,4RAA8R,EAC3T,2DACA,4GCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAWA,eAAe,IACX,IAAM,EAAU,EAAA,UAAU,CAAC,aAAa,CAGlC,EAAW,AAAC,GACd,GAAG,QAAQ,8FAAoG,IAAF,CAAO,sBAAsB,CAAY,CAAV,AAEhJ,GAAI,CACA,IAAI,EAAa,EAAE,CAGb,EAAQ,MAAM,MAAM,EAAS,GAAI,CAAE,KAAM,CAAE,WAAY,IAAK,CAAE,GAAG,IAAI,CAAC,AAAC,GAAM,EAAE,IAAI,IACnF,EAAY,GAAO,MAAQ,EAAE,CAC7B,EAAY,GAAO,MAAM,YAAY,WAAa,EACxD,EAAI,IAAI,IAAI,GAGZ,IAAM,EAAoB,EAAE,CAC5B,IAAK,IAAI,EAAI,EAAG,GAAK,EAAW,IAAK,AACjC,EAAkB,IAAI,CAAC,MAAM,EAAS,GAAI,CAAE,KAAM,CAAE,WAAY,IAAK,CAAE,GAAG,IAAI,CAAC,AAAC,GAAM,EAAE,IAAI,KAqChG,MAlCkB,AAClB,CAiCO,MAlCiB,QAAQ,GAAG,CAAC,EAAA,EAC1B,OAAO,CAAC,GAAK,EAAI,IAAI,IAAK,GAAG,MAAQ,EAAE,GAG/B,EAAI,GAAG,CAAC,AAAC,IACvB,IAAM,EAAQ,EAAK,UAAU,EAAI,EAC3B,EAAK,EAAK,UAAU,EAAI,EAAK,EAAE,EAAI,EAAM,EAAE,CAE7C,EAAwB,KAC5B,GAAI,CACI,EAAM,QAAQ,EAAE,MAAM,YAAY,IAClC,EAAS,EAAM,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CACtC,EAAM,QAAQ,EAAE,IAAK,EAAS,EAAM,QAAQ,CAAC,GAAG,CAChD,EAAK,QAAQ,EAAE,MAAK,EAAS,EAAK,QAAQ,CAAC,GAAA,AAAG,EAGvD,EAAS,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,GAG7B,EAAS,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,EAC7B,CAAE,KAAM,CAAE,CAEV,MAAO,IACH,EACA,MAAO,EAAM,KAAK,EAAI,WACtB,KAAM,EAAM,IAAI,EAAI,GACpB,SAAU,mBACV,QACI,EAAM,OAAO,EACb,qDACJ,QACJ,CACJ,EAGJ,CAAE,KAAM,CACJ,MAAO,EAAE,AACb,CACJ,CAEe,eAAe,IAC1B,IAAM,EAAgB,MAAM,IAE5B,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qIACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAA,GACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAmB,CAAA,CAAC,qBAAsB,IAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAA,KAGnB,kCA3EuB,4BANW,CAC9B,MAAO,0DACP,YAAa,gIACjB,iBAI0B","ignoreList":[0,1]}